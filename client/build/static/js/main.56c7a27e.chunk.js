(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{160:function(e,t,s){var a={"./BACK.svg":317,"./CLUBS/CLUBS_10.svg":318,"./CLUBS/CLUBS_2.svg":319,"./CLUBS/CLUBS_3.svg":320,"./CLUBS/CLUBS_4.svg":321,"./CLUBS/CLUBS_5.svg":322,"./CLUBS/CLUBS_6.svg":323,"./CLUBS/CLUBS_7.svg":324,"./CLUBS/CLUBS_8.svg":325,"./CLUBS/CLUBS_9.svg":326,"./CLUBS/CLUBS_A.svg":327,"./CLUBS/CLUBS_J.svg":328,"./CLUBS/CLUBS_K.svg":329,"./CLUBS/CLUBS_Q.svg":330,"./DIAMONDS/DIAMONDS_10.svg":331,"./DIAMONDS/DIAMONDS_2.svg":332,"./DIAMONDS/DIAMONDS_3.svg":333,"./DIAMONDS/DIAMONDS_4.svg":334,"./DIAMONDS/DIAMONDS_5.svg":335,"./DIAMONDS/DIAMONDS_6.svg":336,"./DIAMONDS/DIAMONDS_7.svg":337,"./DIAMONDS/DIAMONDS_8.svg":338,"./DIAMONDS/DIAMONDS_9.svg":339,"./DIAMONDS/DIAMONDS_A.svg":340,"./DIAMONDS/DIAMONDS_J.svg":341,"./DIAMONDS/DIAMONDS_K.svg":342,"./DIAMONDS/DIAMONDS_Q.svg":343,"./HEARTS/HEARTS_10.svg":344,"./HEARTS/HEARTS_2.svg":345,"./HEARTS/HEARTS_3.svg":346,"./HEARTS/HEARTS_4.svg":347,"./HEARTS/HEARTS_5.svg":348,"./HEARTS/HEARTS_6.svg":349,"./HEARTS/HEARTS_7.svg":350,"./HEARTS/HEARTS_8.svg":351,"./HEARTS/HEARTS_9.svg":352,"./HEARTS/HEARTS_A.svg":353,"./HEARTS/HEARTS_J.svg":354,"./HEARTS/HEARTS_K.svg":355,"./HEARTS/HEARTS_Q.svg":356,"./SPADES/SPADES_10.svg":357,"./SPADES/SPADES_2.svg":358,"./SPADES/SPADES_3.svg":359,"./SPADES/SPADES_4.svg":360,"./SPADES/SPADES_5.svg":361,"./SPADES/SPADES_6.svg":362,"./SPADES/SPADES_7.svg":363,"./SPADES/SPADES_8.svg":364,"./SPADES/SPADES_9.svg":365,"./SPADES/SPADES_A.svg":366,"./SPADES/SPADES_J.svg":367,"./SPADES/SPADES_K.svg":368,"./SPADES/SPADES_Q.svg":369};function i(e){var t=r(e);return s(t)}function r(e){if(!s.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}i.keys=function(){return Object.keys(a)},i.resolve=r,e.exports=i,i.id=160},189:function(e,t,s){},317:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/BACK.853a852d.svg"},318:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/CLUBS_10.99da3686.svg"},319:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/CLUBS_2.78f19057.svg"},320:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/CLUBS_3.6e08d9a8.svg"},321:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/CLUBS_4.a45dba6c.svg"},322:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/CLUBS_5.356ce962.svg"},323:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/CLUBS_6.9f685834.svg"},324:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/CLUBS_7.4d22a1f9.svg"},325:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/CLUBS_8.8eb38da5.svg"},326:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/CLUBS_9.c4a7506a.svg"},327:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/CLUBS_A.55c41002.svg"},328:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/CLUBS_J.5b753d05.svg"},329:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/CLUBS_K.560247c0.svg"},330:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/CLUBS_Q.bd01ab86.svg"},331:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/DIAMONDS_10.8514b127.svg"},332:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/DIAMONDS_2.a73d1531.svg"},333:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/DIAMONDS_3.5115a8c7.svg"},334:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/DIAMONDS_4.4fd0d8f3.svg"},335:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/DIAMONDS_5.87086dfd.svg"},336:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/DIAMONDS_6.14df799c.svg"},337:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/DIAMONDS_7.fb306d7d.svg"},338:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/DIAMONDS_8.bb2937a0.svg"},339:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/DIAMONDS_9.c65e89b4.svg"},340:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/DIAMONDS_A.15971b8b.svg"},341:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/DIAMONDS_J.65ad3dbc.svg"},342:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/DIAMONDS_K.b6117fb3.svg"},343:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/DIAMONDS_Q.31557adc.svg"},344:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/HEARTS_10.85947618.svg"},345:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/HEARTS_2.94fa46e2.svg"},346:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/HEARTS_3.b3f08888.svg"},347:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/HEARTS_4.b3ef5be8.svg"},348:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/HEARTS_5.4a92723e.svg"},349:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/HEARTS_6.6b3e86ce.svg"},350:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/HEARTS_7.80064471.svg"},351:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/HEARTS_8.48fac022.svg"},352:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/HEARTS_9.73433ccf.svg"},353:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/HEARTS_A.0ed45f9e.svg"},354:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/HEARTS_J.fc92ee18.svg"},355:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/HEARTS_K.c3073a6b.svg"},356:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/HEARTS_Q.2b5293f1.svg"},357:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/SPADES_10.caacd048.svg"},358:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/SPADES_2.0fa30f72.svg"},359:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/SPADES_3.33dda4a9.svg"},360:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/SPADES_4.da7c1382.svg"},361:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/SPADES_5.31e4c30b.svg"},362:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/SPADES_6.79464e84.svg"},363:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/SPADES_7.53951d96.svg"},364:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/SPADES_8.41237048.svg"},365:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/SPADES_9.549dee87.svg"},366:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/SPADES_A.ee3ed901.svg"},367:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/SPADES_J.cbe6feb8.svg"},368:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/SPADES_K.9a00c2da.svg"},369:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/SPADES_Q.2f3a0406.svg"},370:function(e,t,s){},371:function(e,t,s){},372:function(e,t,s){},373:function(e,t,s){},374:function(e,t,s){"use strict";s.r(t);var a=s(0),i=s.n(a),r=s(75),c=s.n(r),n=s(12);function l(e){for(var t="",s="ABCDEFGHIJKLMNOPQRSTUVWXYZ",a=s.length,i=0;i<e;i++)t+=s.charAt(Math.floor(Math.random()*a));return t}s(189);var u=s(89),o=s.n(u);const d=Object(a.createContext)(null);var m=s(16),j=s(20),b=s(17),p=s(52),h=s(391),O=s(409),f=s(392),S=s(2);function v(e){let{type:t,label:s,name:a,error:i,touched:r}=e;return Object(S.jsx)(j.a,{type:t,name:a,children:e=>{let{field:c}=e;return Object(S.jsxs)(p.a,{isInvalid:i&&r,children:[Object(S.jsx)(h.a,{htmlFor:a,children:s}),Object(S.jsx)(O.a,Object(m.a)(Object(m.a)({},c),{},{type:t,id:a})),Object(S.jsx)(f.a,{children:i})]})}})}var g=s(410),y=s(406),x=s(404),D=s(407),A=s(396),C=s(412),_=s(397);const E="http://localhost:5008",P={email:"",password:""},w=b.b().shape({email:b.d().required("Required"),password:b.d().required("Required")});function N(e){const[t,s]=Object(a.useState)(null),{user:i,setUser:r}=Object(a.useContext)(d),{isOpen:c,onOpen:n,onClose:l}=Object(g.a)();return i?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(y.a,Object(m.a)(Object(m.a)({},e),{},{onClick:n,children:"Profile"})),Object(S.jsxs)(x.a,{motionPreset:"slideInBottom",isOpen:c,onClose:l,isCentered:!0,children:[Object(S.jsx)(x.g,{}),Object(S.jsxs)(x.d,{className:"noselect",width:"20rem",padding:"1.5rem",children:[Object(S.jsx)(x.c,{}),Object(S.jsx)(x.b,{justify:"center",align:"center",children:Object(S.jsxs)(D.b,{spacing:"1rem",children:[Object(S.jsxs)(A.a,{size:"lg",children:["You're signed in as ",i.username]}),Object(S.jsx)(y.a,{variant:"solid",colorScheme:"whatsapp",onClick:()=>{!async function(){await fetch("".concat(E,"/auth/signout"),{method:"POST",credentials:"include"}),r(null),s(null)}()},children:"Sign Out"})]})})]})]})]}):Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(y.a,Object(m.a)(Object(m.a)({},e),{},{onClick:n,children:"Sign In"})),Object(S.jsxs)(x.a,{motionPreset:"slideInBottom",closeOnOverlayClick:!1,isOpen:c,isCentered:!0,onClose:()=>{s(null),l()},children:[Object(S.jsx)(x.g,{}),Object(S.jsxs)(x.d,{className:"noselect",width:"20rem",children:[Object(S.jsx)(x.c,{}),Object(S.jsx)(x.f,{align:"center",justify:"center",children:"Sign In"}),Object(S.jsxs)(x.b,{align:"center",justify:"center",children:[t&&t.error&&Object(S.jsxs)(C.a,{w:"fit-content",mb:"1rem",justify:"center",align:"center",borderRadius:"0.5rem",padding:"0.5rem 1rem",variant:"solid",status:"error",children:[Object(S.jsx)(C.c,{}),Object(S.jsx)(C.b,{children:t.error})]}),Object(S.jsx)(j.c,{initialValues:P,validationSchema:w,onSubmit:async(e,t)=>{await async function(e){const t={email:e.email,password:e.password};var a=await fetch("".concat(E,"/auth/signin"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});(a=await a.json()).user?r(a.user):s(a)}(e),t.setSubmitting(!1)},children:e=>{let{errors:t,touched:s,isSubmitting:a,isValid:i}=e;return Object(S.jsx)(j.b,{children:Object(S.jsxs)(D.b,{justify:"center",align:"center",w:"12.5rem",children:[Object(S.jsx)(v,{name:"email",label:"Email",error:t.email,touched:s.email}),Object(S.jsx)(v,{type:"password",name:"password",label:"Password",error:t.password,touched:s.password}),Object(S.jsx)(_.a,{}),Object(S.jsx)(y.a,{isLoading:a,isDisabled:!i,type:"submit",colorScheme:"whatsapp",size:"md",variant:"solid",children:"Sign In"})]})})}}),Object(S.jsx)(x.e,{})]})]})]})]})}const T={email:"",username:"",password:"",confirmPassword:""},R=b.b().shape({email:b.d().email("Invalid email").required("Required"),username:b.d().required("Required"),password:b.d().min(6,"Too short").max(20,"Too long").required("Required"),confirmPassword:b.d().oneOf([b.c("password")],"Must match password").required("Required")});function k(e){const[t,s]=Object(a.useState)(),{isOpen:i,onOpen:r,onClose:c}=Object(g.a)();return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(y.a,Object(m.a)(Object(m.a)({},e),{},{onClick:r,children:"Register"})),Object(S.jsxs)(x.a,{motionPreset:"slideInBottom",closeOnOverlayClick:!1,isOpen:i,isCentered:!0,onClose:()=>{s(null),c()},children:[Object(S.jsx)(x.g,{}),Object(S.jsxs)(x.d,{className:"noselect",width:"20rem",children:[Object(S.jsx)(x.c,{}),Object(S.jsx)(x.f,{align:"center",justify:"center",children:"Sign Up"}),Object(S.jsxs)(x.b,{align:"center",justify:"center",children:[t&&t.error&&Object(S.jsxs)(C.a,{w:"fit-content",mb:"1rem",justify:"center",align:"center",borderRadius:"0.5rem",padding:"0.5rem 1rem",variant:"solid",status:"error",children:[Object(S.jsx)(C.c,{}),t.error]}),t&&t.message&&Object(S.jsxs)(C.a,{w:"fit-content",mb:"1rem",justify:"center",align:"center",borderRadius:"0.5rem",padding:"0.5rem 1rem",variant:"solid",status:"success",children:[Object(S.jsx)(C.c,{}),t.message]}),Object(S.jsx)(j.c,{initialValues:T,validationSchema:R,onSubmit:async(e,t)=>{await async function(e){const t={email:e.email,password:e.confirmPassword,username:e.username};var a=await fetch("".concat("http://localhost:5008","/auth/signup"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});a=await a.json(),s(a)}(e),t.setSubmitting(!1)},children:e=>{let{errors:t,touched:s,isSubmitting:a,isValid:i}=e;return Object(S.jsx)(j.b,{children:Object(S.jsxs)(D.b,{justify:"center",align:"center",w:"12.5rem",children:[Object(S.jsx)(v,{name:"email",label:"Email",error:t.email,touched:s.email}),Object(S.jsx)(v,{name:"username",label:"Username",error:t.username,touched:s.username}),Object(S.jsx)(v,{type:"password",name:"password",label:"Password",error:t.password,touched:s.password}),Object(S.jsx)(v,{type:"password",name:"confirmPassword",label:"Confirm Password",error:t.confirmPassword,touched:s.confirmPassword}),Object(S.jsx)(_.a,{}),Object(S.jsx)(y.a,{isLoading:a,isDisabled:!i,type:"submit",colorScheme:"whatsapp",size:"md",variant:"solid",children:"Sign Up"})]})})}}),Object(S.jsx)(x.e,{})]})]})]})]})}var I=s(399),B=s(403),U=s(408),M=s(411),L=s(398);function H(e){let{w:t,size:s,onClose:a,onTrigger:i,queueLength:r}=e;return Object(S.jsxs)(B.a,{flip:!0,returnFocusOnClose:!0,onClose:a,children:[Object(S.jsx)(B.f,{children:Object(S.jsx)(y.a,{w:t,size:s,onClick:i,children:"Matchmaking"})}),Object(S.jsx)(U.a,{children:Object(S.jsxs)(B.e,{w:"fit-content",p:"1rem 1.5rem",className:"noselect",children:[Object(S.jsx)(B.b,{}),Object(S.jsx)(B.d,{}),Object(S.jsx)(B.c,{children:Object(S.jsxs)(D.b,{children:[Object(S.jsxs)(D.a,{s:"1rem",children:[Object(S.jsx)(M.a,{}),Object(S.jsx)(A.a,{size:"md",children:"Waiting, ".concat(r," in Queue.")})]}),0===r&&Object(S.jsx)(L.a,{size:"sm",children:"Please be patient. The server can take up to 1 min to cold start."})]})})]})})]})}const F={room:""},G=b.b().shape({room:b.d().required("Required").length(3,"Room should be 3 letters long")});function z(e){const{isOpen:t,onOpen:s,onClose:i}=Object(g.a)(),[r,c]=Object(a.useState)(null);return r?Object(S.jsx)(n.a,{to:"/play?roomCode=".concat(r)}):Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(y.a,Object(m.a)(Object(m.a)({},e),{},{onClick:s,children:"Room Code"})),Object(S.jsxs)(x.a,{motionPreset:"slideInBottom",closeOnOverlayClick:!1,isOpen:t,onClose:i,isCentered:!0,children:[Object(S.jsx)(x.g,{}),Object(S.jsxs)(x.d,{className:"noselect",width:"20rem",padding:"1.5rem",children:[Object(S.jsx)(x.c,{}),Object(S.jsx)(x.b,{justify:"center",align:"center",children:Object(S.jsx)(j.c,{initialValues:F,validationSchema:G,onSubmit:async(e,t)=>{let{room:s}=e,{setSubmitting:a}=t;await c(s.toUpperCase()),a(!1)},children:e=>{let{errors:t,touched:s,isSubmitting:a,isValid:i}=e;return Object(S.jsx)(j.b,{className:"auth-form",children:Object(S.jsxs)(D.b,{justify:"center",align:"center",w:"12.5rem",children:[Object(S.jsx)(v,{name:"room",label:"Room Code",error:t.room,touched:s.room}),Object(S.jsx)(_.a,{}),Object(S.jsx)(y.a,{isLoading:a,isDisabled:!i,type:"submit",colorScheme:"whatsapp",size:"md",variant:"solid",children:"Join Room"})]})})}})})]})]})]})}let K;var J=()=>{const[e,t]=Object(a.useState)([]),[s,i]=Object(a.useState)(!1),[r,c]=Object(a.useState)(""),{user:u}=Object(a.useContext)(d);if(Object(a.useEffect)((()=>{const e={forceNew:!0,reconnectionAttempts:1/0,transports:["websocket"]};return K=o.a.connect("http://localhost:5008",e),()=>{K.emit("waitingDisconnection"),K.off()}}),[]),Object(a.useEffect)((()=>{K.on("waitingRoomData",(e=>{let{waiting:s}=e;s&&t(s)})),K.on("randomCode",(e=>{let{code:t}=e;t&&c(t)}))}),[]),Object(a.useEffect)((()=>{s?K.emit("waiting"):K.emit("waitingDisconnection")}),[s]),e.length>=2){const t=e.slice(0,2);if(K.emit("randomCode",{id1:t[0],id2:t[1],code:l(3)}),(t[0]===K.id||t[1]===K.id)&&r)return K.emit("waitingDisconnection"),Object(S.jsx)(n.a,{to:"/play?roomCode=".concat(r)})}return Object(S.jsxs)("div",{className:"Homepage",children:[Object(S.jsx)("header",{className:"homepage-header",children:Object(S.jsx)("h1",{children:"\ud83c\udfb2 Poker Royale \ud83c\udfb2"})}),Object(S.jsxs)(I.a,{className:"noselect",justify:"center",align:"center",flexDir:"column",children:[u?Object(S.jsxs)(A.a,{m:"1rem 0",color:"whitesmoke",size:"lg",children:["Welcome, ",u.username,"!"]}):Object(S.jsx)(A.a,{m:"1rem 0",color:"whitesmoke",size:"lg",children:"TFG - DAW"}),Object(S.jsxs)(D.b,{w:"lg",s:"1rem",align:"center",justify:"center",children:[Object(S.jsx)(_.a,{}),Object(S.jsx)(N,{w:"30%",size:"lg"}),!u&&Object(S.jsx)(k,{w:"30%",size:"lg"}),Object(S.jsx)(z,{w:"30%",size:"lg"}),Object(S.jsx)(H,{w:"30%",size:"lg",onTrigger:()=>i(!0),onClose:()=>i(!1),queueLength:e.length})]})]}),Object(S.jsx)("footer",{className:"homepage-footer",children:Object(S.jsx)("small",{children:"by Agust\xedn Alvarez Fijo"})})]})},q=[{suit:"hearts",value:2},{suit:"hearts",value:3},{suit:"hearts",value:4},{suit:"hearts",value:5},{suit:"hearts",value:6},{suit:"hearts",value:7},{suit:"hearts",value:8},{suit:"hearts",value:9},{suit:"hearts",value:10},{suit:"hearts",value:"J"},{suit:"hearts",value:"Q"},{suit:"hearts",value:"K"},{suit:"hearts",value:"A"},{suit:"diamonds",value:2},{suit:"diamonds",value:3},{suit:"diamonds",value:4},{suit:"diamonds",value:5},{suit:"diamonds",value:6},{suit:"diamonds",value:7},{suit:"diamonds",value:8},{suit:"diamonds",value:9},{suit:"diamonds",value:10},{suit:"diamonds",value:"J"},{suit:"diamonds",value:"Q"},{suit:"diamonds",value:"K"},{suit:"diamonds",value:"A"},{suit:"clubs",value:2},{suit:"clubs",value:3},{suit:"clubs",value:4},{suit:"clubs",value:5},{suit:"clubs",value:6},{suit:"clubs",value:7},{suit:"clubs",value:8},{suit:"clubs",value:9},{suit:"clubs",value:10},{suit:"clubs",value:"J"},{suit:"clubs",value:"Q"},{suit:"clubs",value:"K"},{suit:"clubs",value:"A"},{suit:"spades",value:2},{suit:"spades",value:3},{suit:"spades",value:4},{suit:"spades",value:5},{suit:"spades",value:6},{suit:"spades",value:7},{suit:"spades",value:8},{suit:"spades",value:9},{suit:"spades",value:10},{suit:"spades",value:"J"},{suit:"spades",value:"Q"},{suit:"spades",value:"K"},{suit:"spades",value:"A"}];function Q(e){for(var t=0;t<1e3;t++){var s=Math.floor(Math.random()*e.length),a=Math.floor(Math.random()*e.length),i=e[s];e[s]=e[a],e[a]=i}return e}function V(e,t){var s=[],a={},i=[],r=[],c=[],n={type:"None"};const l=e.filter((e=>{if(e)return e})),u=t.filter((e=>{if(e)return e})),o=l&&u&&l.concat(u).map((e=>e?"J"===e.value?{suit:e.suit,value:11}:"Q"===e.value?{suit:e.suit,value:12}:"K"===e.value?{suit:e.suit,value:13}:"A"===e.value?{suit:e.suit,value:14}:{suit:e.suit,value:e.value}:void 0));if(!o)return"Error";const d=o.map((e=>e.value)),m=d.sort(((e,t)=>t-e)),j=o.map((e=>e.suit));d.forEach((e=>{s[e]=(s[e]||0)+1})),j.forEach((e=>{a[e]=(a[e]||0)+1}));for(var b=1;b<14;b++)2===s[b]?i.push(b):3===s[b]?r.push(b):4===s[b]&&c.push(b);if(o.forEach((e=>{let{suit:t,value:s}=e;const a=!!(d.includes(s+1)&&d.includes(s+2)&&d.includes(s+3)&&d.includes(s+4)),i=o.some((e=>e.value===s+1&&e.suit===t))&&o.some((e=>e.value===s+2&&e.suit===t))&&o.some((e=>e.value===s+3&&e.suit===t))&&o.some((e=>e.value===s+4&&e.suit===t)),r=!!(d.includes(14)&&d.includes(2)&&d.includes(3)&&d.includes(4)&&d.includes(5)),c=o.some((e=>14===e.value&&e.suit===t))&&o.some((e=>2===e.value&&e.suit===t))&&o.some((e=>3===e.value&&e.suit===t))&&o.some((e=>4===e.value&&e.suit===t))&&o.some((e=>4===e.value&&e.suit===t));10===s&&i?n.type="Royal Flush":i?(n.type="Straight Flush",n.primary=s+4):a?(n.type="Straight",n.primary=s+4):[14,2,3,4,5].includes(s)&&c?(n.type="Straight Flush",n.primary=5):[14,2,3,4,5].includes(s)&&r&&(n.type="Straight",n.primary=5)})),"None"===n.type&&1===i.length&&0===r.length){n.type="One Pair",n.primary=i[0];const e=m.filter((e=>e!==n.primary));n.secondary=e[0],n.tertiary=e[1]}else 2===i.length?(n.type="Two Pair",n.primary=i[1],n.secondary=i[0],n.tertiary=m.filter((e=>e!==n.primary&&e!==n.secondary))[0]):i.length>2?(n.type="Two Pair",n.primary=i[i.length],n.secondary=i[i.length-1],n.tertiary=m.filter((e=>e!==n.primary&&e!==n.secondary))[0]):0===i.length&&1===r.length?(n.type="Three of a kind",n.primary=r[0],n.secondary=m.filter((e=>e!==n.primary))[0]):Object.keys(a).length<4&&function(e){return!!(e.diamonds&&e.diamonds>=5)||(!!(e.clubs&&e.clubs>=5)||(!!(e.spades&&e.spades>=5)||!!(e.hearts&&e.hearts>=5)))}(a)?(n.type="Flush",n.primary=m[0]):1===i.length&&1===r.length?(n.type="Full House",n.primary=r[0],n.secondary=i[0]):1===c.length?(n.type="Four of a kind",n.primary=c[0],n.secondary=m.filter((e=>e!==n.primary))[0]):((n.type="None")||["Royal Flush","Straight Flush","Straight"].includes(n.type))&&(n.primary=m[0],n.secondary=m[1]);return n}function W(e,t,s,a){const i=c(s.type),r=c(a.type);function c(e){var t;switch(e){case"None":t=0;break;case"One Pair":t=1;break;case"Two Pair":t=2;break;case"Three of a kind":t=3;break;case"Straight":t=4;break;case"Flush":t=5;break;case"Full House":t=6;break;case"Four of a kind":t=7;break;case"Straight Flush":case"Royal Flush":t=8}return t}if(i>r)return e;if(i<r)return t;if(i===r)if("Royal Flush"!==i){if(s.primary>a.primary)return e;if(s.primary<a.primary)return t;if(s.primary===a.primary){if(!s.secondary)return"Tie";if(s.secondary>a.secondary)return e;if(s.secondary<a.secondary)return t;if(s.secondary===a.secondary){if(!s.tertiary)return"Tie";if(s.tertiary>a.tertiary)return e;if(s.tertiary<a.tertiary)return t;if(s.tertiary===a.tertiary)return"Tie"}}}else if("Royal Flush"===i)return"Tie"}var Y=s(96),X=s.n(Y);var Z=function(e){let{value:t,suit:a,className:i}=e;return Object(S.jsxs)(S.Fragment,{children:["BACK"!==a&&Object(S.jsx)("img",{className:i,alt:a+"-"+t,src:s(160)("./".concat(a.toUpperCase(),"/").concat(a.toUpperCase(),"_").concat(t,".svg")).default}),"BACK"===a&&Object(S.jsx)("img",{className:i,alt:a+"-"+t,src:s(160)("./".concat(a,".svg")).default})]})};s(370);var $=function(){return Object(S.jsxs)("div",{className:"lds-ellipsis",children:[Object(S.jsx)("div",{}),Object(S.jsx)("div",{}),Object(S.jsx)("div",{}),Object(S.jsx)("div",{})]})};function ee(e){let{numberOfTurns:t,player1Deck:s,player2Deck:i,houseDeck:r,gameOver:c,currentUser:n,player1Chips:l,player2Chips:u,turn:o,winner:d,player1Name:m,player2Name:j}=e;const[b,p]=Object(a.useState)(),[h,O]=Object(a.useState)(),[f,v]=Object(a.useState)();return Object(a.useEffect)((()=>{v(t<2?"Buy In to reveal cards":t<4?"Flop":t<6?"Turn":t<8?"River":"Game Over!")}),[t]),Object(a.useEffect)((()=>{p("Player 1"===n&&d===m?"\ud83d\udc51 ".concat(m," (You)"):"Player 1"===n?"".concat(m," (You)"):d===m?"\ud83d\udc51 ".concat(m):m),O("Player 2"===n&&d===j?"\ud83d\udc51 ".concat(j," (You)"):"Player 2"===n?"".concat(j," (You)"):d===j?"\ud83d\udc51 ".concat(j):j)}),[d,m,j,n]),Object(S.jsxs)(I.a,{justify:"center",align:"center",flexDir:"column",children:[Object(S.jsx)(A.a,{my:"0.5rem",fontFamily:"inherit",size:"md",style:{color:d===j?"#FFD700":"inherit"},children:h}),Object(S.jsxs)(D.a,{spacing:"1.5rem",children:[Object(S.jsx)(D.a,{children:i.map((e=>("Player 2"===n||c)&&e?Object(S.jsx)(Z,{className:"player-card",value:e.value,suit:e.suit}):Object(S.jsx)(Z,{className:"player-card-back",suit:"BACK"})))}),Object(S.jsxs)(D.b,{children:[Object(S.jsxs)(A.a,{size:"md",fontWeight:"semibold",fontFamily:"inherit",children:["Chips: ",u]}),"Player 1"===n&&"Player 2"===o&&!c&&Object(S.jsx)($,{})]})]}),Object(S.jsx)(A.a,{my:"0.5rem",fontFamily:"inherit",size:"md",children:f}),Object(S.jsx)(I.a,{justify:"center",align:"center",flexDir:"row",gridGap:"1rem",flexWrap:"wrap",children:r.map((e=>Object(S.jsx)(Z,{value:e.value,suit:t>=2?e.suit:"BACK",className:"card"})))}),Object(S.jsx)(A.a,{my:"0.5rem",fontFamily:"inherit",size:"md",style:{color:d===m?"#FFD700":"inherit"},children:b}),Object(S.jsxs)(D.a,{spacing:"1.5rem",children:[Object(S.jsxs)(D.b,{children:[Object(S.jsxs)(A.a,{size:"md",fontWeight:"semibold",fontFamily:"inherit",children:["Chips: ",l]}),"Player 2"===n&&"Player 1"===o&&!c&&Object(S.jsx)($,{})]}),Object(S.jsx)(D.a,{children:s.map((e=>("Player 1"===n||c)&&e?Object(S.jsx)(Z,{className:"player-card",value:e.value,suit:e.suit}):Object(S.jsx)(Z,{className:"player-card-back",suit:"BACK"})))})]})]})}var te=s(80),se=s.p+"static/media/shuffling-cards-1.30ba20ce.mp3",ae=s.p+"static/media/check-sound.d733519c.mp3",ie=s.p+"static/media/chips-sound.612d2701.mp3",re=s.p+"static/media/card-flip.5000e679.mp3";function ce(e){const{isOpen:t,onOpen:s,onClose:a}=Object(g.a)(),i={raise:Math.round(10*(e.minRaise+10))/10},r=b.b().shape({raise:b.a().typeError("Invalid Amount").required("Required").lessThan(e.maxRaise,"Not enough chips, remaining: ".concat(e.maxRaise)).min(e.minRaise+1,"Has to be more than ".concat(e.minRaise))});return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(y.a,Object(m.a)(Object(m.a)({},e),{},{onClick:s,variant:"solid",border:"2px solid black",size:"md",w:"10rem",children:"Raise"})),Object(S.jsxs)(x.a,{motionPreset:"slideInBottom",isOpen:t,isCentered:!0,onClose:()=>{a()},children:[Object(S.jsx)(x.g,{}),Object(S.jsxs)(x.d,{fontFamily:"Ubuntu Mono",className:"noselect",width:"20rem",children:[Object(S.jsx)(x.c,{}),Object(S.jsx)(x.f,{align:"center",justify:"center",children:"Raise"}),Object(S.jsxs)(x.b,{align:"center",justify:"center",children:[Object(S.jsx)(j.c,{initialValues:i,validationSchema:r,onSubmit:async(t,s)=>{await e.raiseHandler(t.raise),s.setSubmitting(!1),a()},children:t=>{let{errors:s,touched:a,isSubmitting:i,isValid:r}=t;return Object(S.jsx)(j.b,{children:Object(S.jsxs)(D.a,{h:"fit-content",align:"flex-start",children:[Object(S.jsx)(v,{name:"raise",error:s.raise,touched:a.raise}),Object(S.jsx)(_.a,{}),Object(S.jsx)(y.a,{isLoading:i,isDisabled:!r||e.isDisabled,type:"submit",colorScheme:"facebook",size:"lg",variant:"solid",children:"Raise"})]})})}}),Object(S.jsx)(x.e,{})]})]})]})]})}var ne=s(400);let le;var ue=function(e){const t=X.a.parse(e.location.search),[s,i]=Object(a.useState)(t.roomCode),[r,c]=Object(a.useState)(!1),[n,l]=Object(a.useState)([]),[u,m]=Object(a.useState)(""),{user:j}=Object(a.useContext)(d);Object(a.useEffect)((()=>(le=o.a.connect("http://localhost:5008",{forceNew:!0,reconnectionAttempts:"Infinity",transports:["websocket"]}),le.emit("join",{room:s},(e=>{e&&c(!0)})),()=>{le.emit("disconnection"),le.off()})),[]);const[b,p]=Object(a.useState)(),[h,O]=Object(a.useState)(""),[f,v]=Object(a.useState)(""),[g,x]=Object(a.useState)(""),[C,_]=Object(a.useState)([]),[E,P]=Object(a.useState)([]),[w,N]=Object(a.useState)([]),[T,R]=Object(a.useState)(""),[k,B]=Object(a.useState)(""),[U,M]=Object(a.useState)(""),[L,H]=Object(a.useState)(""),[F,G]=Object(a.useState)(""),[z,K]=Object(a.useState)(),[J,Y]=Object(a.useState)(),[Z]=Object(te.a)(se),[$]=Object(te.a)(ie),[ue]=Object(te.a)(re),[oe]=Object(te.a)(ae),[de,me]=Object(a.useState)("N/A");async function je(){"Player 1"===u?(le.emit("updateGameState",{turn:"Player 2",player1Chips:T-U,numberOfTurns:g+1,pot:L+U}),0===U?oe():$()):"Player 2"===u&&(le.emit("updateGameState",{turn:"Player 1",player2Chips:k-U,numberOfTurns:g+1,pot:L+U}),0===U?oe():$())}Object(a.useEffect)((()=>{const e=Q(q),t=e.splice(0,2),s=e.splice(0,2),a=e.splice(0,3);le.emit("initGameState",{gameOver:!1,turn:"Player 1",player1Deck:[...t],player2Deck:[...s],houseDeck:[...a],player1Chips:500,player2Chips:500,increment:10,numberOfTurns:0,pot:0,raiseAmount:0,player1Name:"Player 1",player2Name:"Player 2"}),pe(e.splice(0,2))}),[]),Object(a.useEffect)((()=>{le.on("initGameState",(e=>{let{gameOver:t,winner:s,turn:a,player1Deck:i,player2Deck:r,houseDeck:c,increment:n,player1Chips:l,player2Chips:u,numberOfTurns:o,pot:d,raiseAmount:m,player1Name:j,player2Name:b}=e;p(t),v(a),_(i),P(r),N(c),M(n),R(l),B(u),x(o),H(d),G(m),K(j),Y(b),O(s)})),le.on("updateGameState",(e=>{let{gameOver:t,winner:s,turn:a,player1Deck:i,player2Deck:r,houseDeck:c,increment:n,player1Chips:l,player2Chips:u,numberOfTurns:o,pot:d,raiseAmount:m,player1Name:j,player2Name:b}=e;t&&p(t),s&&O(s),a&&v(a),i&&_(i),r&&P(r),c&&N(c),void 0!==n&&null!==n&&M(n),void 0!==l&&null!==l&&R(l),void 0!==u&&null!==u&&B(u),o&&x(o),d&&H(d),void 0!==m&&null!==m&&G(m),j&&K(j),b&&Y(b)})),le.on("roomData",(e=>{let{users:t}=e;l(t)})),le.on("currentUserData",(e=>{let{name:t}=e;m(t)}))}),[]),Object(a.useEffect)((()=>{j&&j.username&&z!==j.username&&J!==j.username&&("Player 1"===u&&le.emit("updateGameState",{player1Name:j.username}),"Player 2"===u&&le.emit("updateGameState",{player2Name:j.username})),le.emit("updateGameState",{raiseAmount:0}),2===g?(le.emit("updateGameState",{increment:0}),Z()):4===g?(le.emit("updateGameState",{houseDeck:[...w,be[0]],increment:0}),ue()):6===g?(le.emit("updateGameState",{houseDeck:[...w,be[1]],increment:0}),ue()):8===g&&le.emit("updateGameState",{gameOver:!0,winner:W(z,J,V(C,w),V(E,w))}),b||"Player 1"!==u?b||"Player 2"!==u||me(V(E,w)):me(V(C,w))}),[g]);const[be,pe]=Object(a.useState)(""),[he,Oe]=Object(a.useState)(!1);return Object(a.useEffect)((()=>{if(!0===b&&h!==z&&h!==J&&"Tie"!==h&&le.emit("updateGameState",{winner:W(z,J,V(C,w),V(E,w))}),!0===he){const e=Q(q),t=e.splice(0,2),s=e.splice(0,2),a=e.splice(0,3);h===z?le.emit("initGameState",{gameOver:!1,turn:"Player 1",player1Deck:[...t],player2Deck:[...s],houseDeck:[...a],player1Chips:T+L,player2Chips:k,increment:10,numberOfTurns:0,winner:"",pot:0,player1Name:z,player2Name:J}):h===J?le.emit("initGameState",{gameOver:!1,turn:"Player 2",player1Deck:[...t],player2Deck:[...s],houseDeck:[...a],player1Chips:T,player2Chips:k+L,increment:10,numberOfTurns:0,winner:"",pot:0,player1Name:z,player2Name:J}):"Tie"===h&&le.emit("initGameState",{gameOver:!1,turn:"Player 1",player1Deck:[...t],player2Deck:[...s],houseDeck:[...a],player1Chips:T+L/2,player2Chips:k+L/2,increment:10,numberOfTurns:0,winner:"",pot:0,player1Name:"Player 1",player2Name:"Player 2"}),Oe(!1),pe(e.splice(0,2))}}),[he]),n.length<2?Object(S.jsx)("h1",{children:"Waiting..."}):Object(S.jsx)("div",{className:"game-bg noselect",children:Object(S.jsxs)("div",{className:"game-board",children:[Object(S.jsx)(ne.a,{position:"absolute",top:"0.3125rem",left:"0.3125rem",translate:"transform(-0.3125rem, -0.3125rem)",backgroundColor:"whitesmoke",color:"black",padding:"0.5rem",borderRadius:"0.25rem",children:Object(S.jsxs)(A.a,{size:"md",fontFamily:"inherit",children:["Room Code: ",t.roomCode]})}),Object(S.jsx)(ee,{numberOfTurns:g,player1Deck:C,player2Deck:E,houseDeck:w,gameOver:b,currentUser:u,player1Chips:T,player2Chips:k,turn:f,player1Name:z,player2Name:J,winner:h}),Object(S.jsx)(I.a,{justify:"center",align:"center",w:"100%",mt:"1rem",children:Object(S.jsxs)(A.a,{size:"md",fontFamily:"inherit",style:{color:"#FFD700"},children:["Pot \u200b\ud83d\udcb0\u200b: ",L]})}),Object(S.jsxs)(D.a,{m:"1rem",justify:"center",align:"center",spacing:"1rem",color:"black",children:[!b&&Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(y.a,{isDisabled:u!==f||"Player 2"===u&&k<U||"Player 1"===u&&T<U||b,variant:"solid",border:"2px solid black",size:"md",w:"10rem",onClick:()=>je(),children:0===F&&U&&g<2&&"Buy In(".concat(U,")")||0===F&&U&&"Call(".concat(U,")")||F>0&&"Call(".concat(F,")")||"Check"}),Object(S.jsx)(ce,{minRaise:F>0?F:U,maxRaise:"Player 1"===u?T:k,initialValue:F>0?F+U:null,isDisabled:f!==u||b,callHandler:()=>{je()},raiseHandler:e=>{!async function(e){e=parseInt(e),"Player 1"===u?(g%2===0&&le.emit("updateGameState",{turn:"Player 2",increment:e,player1Chips:T-e,numberOfTurns:g+1,pot:L+e}),g%2!==0&&le.emit("updateGameState",{turn:"Player 2",increment:e-U,player1Chips:T-e,numberOfTurns:g,pot:L+e,raiseAmount:e}),$()):"Player 2"===u&&(g%2===0&&le.emit("updateGameState",{turn:"Player 1",increment:e,player2Chips:k-e,numberOfTurns:g+1,pot:L+e}),g%2!==0&&le.emit("updateGameState",{turn:"Player 1",increment:e-U,player2Chips:k-e,numberOfTurns:g,pot:L+e,raiseAmount:e}),$())}(e)}}),Object(S.jsx)(y.a,{isDisabled:u!==f||b,colorScheme:"red",variant:"solid",border:"2px solid black",size:"md",w:"10rem",onClick:()=>{"Player 1"===u?le.emit("updateGameState",{gameOver:!0,winner:J}):"Player 2"===u&&le.emit("updateGameState",{gameOver:!0,winner:z})},children:"Fold"})]}),b&&Object(S.jsx)(y.a,{isLoading:he,onClick:()=>{Oe(!0)},w:"10rem",children:"Restart"})]})]})})},oe=s(56);function de(e){const[t,s]=Object(a.useState)(!0),[i,r]=Object(a.useState)(!1);var{id:c}=X.a.parse(e.location.search);return Object(a.useEffect)((()=>{t&&fetch("".concat("http://localhost:5008","/auth/verify/").concat(c),{method:"GET",credentials:"include"}).then((e=>{200===e.status&&r(!0),s(!1)}))}),[]),t?Object(S.jsx)("h1",{children:"Loading..."}):i?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("h1",{children:"Verified"}),Object(S.jsxs)("h1",{children:["Return to ",Object(S.jsx)(oe.b,{style:{color:"blue",textDecoration:"underline"},to:"/",children:"homepage"})," to sign in"]})]}):i?void 0:Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("h1",{children:"Error: User not found, you may already be verified"}),Object(S.jsxs)("h1",{children:["Return to ",Object(S.jsx)(oe.b,{style:{color:"blue",textDecoration:"underline"},to:"/",children:"homepage"})," to sign up again"]})]})}s(371),s(372),s(373);var me=s(401),je=s(405);const be=Object(me.a)({styles:{global:{body:{bg:"whiteAlpha.200",color:"white",m:0,p:0}}}});var pe=()=>{const e="http://localhost:5008",[t,s]=Object(a.useState)(null),[i,r]=Object(a.useState)(!0);return Object(a.useEffect)((()=>{i&&(async()=>{try{await fetch("".concat(e,"/auth/"),{method:"GET",credentials:"include",mode:"cors"}).then((e=>e.json())).then((e=>{e.user&&s(e.user)}))}catch(t){console.error(t)}finally{r(!1)}})()}),[e,i]),i?Object(S.jsx)("h1",{children:"Loading..."}):Object(S.jsx)("div",{className:"App",children:Object(S.jsx)(d.Provider,{value:{user:t,setUser:s},children:Object(S.jsxs)(je.a,{theme:be,children:[Object(S.jsx)(n.b,{path:"/",exact:!0,component:J}),Object(S.jsx)(n.b,{path:"/play",exact:!0,component:ue}),Object(S.jsx)(n.b,{path:"/verify",exact:!0,component:de})]})})})};c.a.render(Object(S.jsx)(i.a.StrictMode,{children:Object(S.jsx)(oe.a,{children:Object(S.jsx)(pe,{})})}),document.getElementById("root"))}},[[374,1,2]]]);
//# sourceMappingURL=main.56c7a27e.chunk.js.map